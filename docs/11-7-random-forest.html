<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Business and Technical Analytics with R</title>
  <meta name="description" content="This is a study and reference notes to solving various business analytics problems using R.">
  <meta name="generator" content="bookdown 0.4 and GitBook 2.6.7">

  <meta property="og:title" content="Business and Technical Analytics with R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is a study and reference notes to solving various business analytics problems using R." />
  <meta name="github-repo" content="yongks/biz_tech_analytics_r" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Business and Technical Analytics with R" />
  
  <meta name="twitter:description" content="This is a study and reference notes to solving various business analytics problems using R." />
  

<meta name="author" content="Yong Keh Soon">


<meta name="date" content="2017-07-13">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="11-6-conditional-inference-tree.html">
<link rel="next" href="11-8-svm.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; background-color: #f8f8f8; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
pre, code { background-color: #f8f8f8; }
code > span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code > span.dt { color: #204a87; } /* DataType */
code > span.dv { color: #0000cf; } /* DecVal */
code > span.bn { color: #0000cf; } /* BaseN */
code > span.fl { color: #0000cf; } /* Float */
code > span.ch { color: #4e9a06; } /* Char */
code > span.st { color: #4e9a06; } /* String */
code > span.co { color: #8f5902; font-style: italic; } /* Comment */
code > span.ot { color: #8f5902; } /* Other */
code > span.al { color: #ef2929; } /* Alert */
code > span.fu { color: #000000; } /* Function */
code > span.er { color: #a40000; font-weight: bold; } /* Error */
code > span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #000000; } /* Constant */
code > span.sc { color: #000000; } /* SpecialChar */
code > span.vs { color: #4e9a06; } /* VerbatimString */
code > span.ss { color: #4e9a06; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #000000; } /* Variable */
code > span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code > span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code > span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code > span.ex { } /* Extension */
code > span.at { color: #c4a000; } /* Attribute */
code > span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code > span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Business and Technical Analytics /R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="1-fundamentals.html"><a href="1-fundamentals.html"><i class="fa fa-check"></i><b>1</b> R Fundamentals</a></li>
<li class="chapter" data-level="2" data-path="2-data-generation.html"><a href="2-data-generation.html"><i class="fa fa-check"></i><b>2</b> Data Generation</a></li>
<li class="chapter" data-level="3" data-path="3-data-simulation.html"><a href="3-data-simulation.html"><i class="fa fa-check"></i><b>3</b> Data Simulation</a></li>
<li class="chapter" data-level="4" data-path="4-data-summarization.html"><a href="4-data-summarization.html"><i class="fa fa-check"></i><b>4</b> Data Summarization</a></li>
<li class="chapter" data-level="5" data-path="5-data-preprocessing.html"><a href="5-data-preprocessing.html"><i class="fa fa-check"></i><b>5</b> Data Preprocessing</a></li>
<li class="chapter" data-level="6" data-path="6-find-order-and-filter-data.html"><a href="6-find-order-and-filter-data.html"><i class="fa fa-check"></i><b>6</b> Find, Order and Filter Data</a></li>
<li class="chapter" data-level="7" data-path="7-data-visualization.html"><a href="7-data-visualization.html"><i class="fa fa-check"></i><b>7</b> Data Visualization</a></li>
<li class="chapter" data-level="8" data-path="8-statistics.html"><a href="8-statistics.html"><i class="fa fa-check"></i><b>8</b> Statistics</a></li>
<li class="chapter" data-level="9" data-path="9-clustering-analysis.html"><a href="9-clustering-analysis.html"><i class="fa fa-check"></i><b>9</b> Clustering Analysis</a></li>
<li class="chapter" data-level="10" data-path="10-regression-analysis.html"><a href="10-regression-analysis.html"><i class="fa fa-check"></i><b>10</b> Regression Analysis</a></li>
<li class="chapter" data-level="11" data-path="11-classification.html"><a href="11-classification.html"><i class="fa fa-check"></i><b>11</b> Classification</a><ul>
<li class="chapter" data-level="11.1" data-path="11-1-introduction.html"><a href="11-1-introduction.html"><i class="fa fa-check"></i><b>11.1</b> Introduction</a><ul>
<li class="chapter" data-level="11.1.1" data-path="11-1-introduction.html"><a href="11-1-introduction.html#application"><i class="fa fa-check"></i><b>11.1.1</b> Application</a></li>
<li class="chapter" data-level="11.1.2" data-path="11-1-introduction.html"><a href="11-1-introduction.html#types-of-classification"><i class="fa fa-check"></i><b>11.1.2</b> Types of Classification</a></li>
<li class="chapter" data-level="11.1.3" data-path="11-1-introduction.html"><a href="11-1-introduction.html#comparing-algorithm"><i class="fa fa-check"></i><b>11.1.3</b> Comparing Algorithm</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="11-2-library.html"><a href="11-2-library.html"><i class="fa fa-check"></i><b>11.2</b> Library</a></li>
<li class="chapter" data-level="11.3" data-path="11-3-sample-dataset.html"><a href="11-3-sample-dataset.html"><i class="fa fa-check"></i><b>11.3</b> Sample Dataset</a><ul>
<li class="chapter" data-level="11.3.1" data-path="11-3-sample-dataset.html"><a href="11-3-sample-dataset.html#the-variables"><i class="fa fa-check"></i><b>11.3.1</b> The Variables</a></li>
<li class="chapter" data-level="11.3.2" data-path="11-3-sample-dataset.html"><a href="11-3-sample-dataset.html#explore-the-data"><i class="fa fa-check"></i><b>11.3.2</b> Explore The Data</a></li>
</ul></li>
<li class="chapter" data-level="11.4" data-path="11-4-logistic-regression.html"><a href="11-4-logistic-regression.html"><i class="fa fa-check"></i><b>11.4</b> Logistic Regression</a><ul>
<li class="chapter" data-level="11.4.1" data-path="11-4-logistic-regression.html"><a href="11-4-logistic-regression.html#the-concept"><i class="fa fa-check"></i><b>11.4.1</b> The Concept</a></li>
<li class="chapter" data-level="11.4.2" data-path="11-4-logistic-regression.html"><a href="11-4-logistic-regression.html#assumptions"><i class="fa fa-check"></i><b>11.4.2</b> Assumptions</a></li>
<li class="chapter" data-level="11.4.3" data-path="11-4-logistic-regression.html"><a href="11-4-logistic-regression.html#equations"><i class="fa fa-check"></i><b>11.4.3</b> Equations</a></li>
<li class="chapter" data-level="11.4.4" data-path="11-4-logistic-regression.html"><a href="11-4-logistic-regression.html#high-school-formula"><i class="fa fa-check"></i><b>11.4.4</b> High School Formula</a></li>
<li class="chapter" data-level="11.4.5" data-path="11-4-logistic-regression.html"><a href="11-4-logistic-regression.html#run-the-code"><i class="fa fa-check"></i><b>11.4.5</b> Run The Code</a></li>
</ul></li>
<li class="chapter" data-level="11.5" data-path="11-5-decision-tree.html"><a href="11-5-decision-tree.html"><i class="fa fa-check"></i><b>11.5</b> Decision Tree</a><ul>
<li class="chapter" data-level="11.5.1" data-path="11-5-decision-tree.html"><a href="11-5-decision-tree.html#the-concept-1"><i class="fa fa-check"></i><b>11.5.1</b> The Concept</a></li>
<li class="chapter" data-level="11.5.2" data-path="11-5-decision-tree.html"><a href="11-5-decision-tree.html#tree-building"><i class="fa fa-check"></i><b>11.5.2</b> Tree Building</a></li>
<li class="chapter" data-level="11.5.3" data-path="11-5-decision-tree.html"><a href="11-5-decision-tree.html#splitting-criteria"><i class="fa fa-check"></i><b>11.5.3</b> Splitting Criteria</a></li>
<li class="chapter" data-level="11.5.4" data-path="11-5-decision-tree.html"><a href="11-5-decision-tree.html#pruning-tree"><i class="fa fa-check"></i><b>11.5.4</b> Pruning Tree</a></li>
<li class="chapter" data-level="11.5.5" data-path="11-5-decision-tree.html"><a href="11-5-decision-tree.html#tree-selection"><i class="fa fa-check"></i><b>11.5.5</b> Tree Selection</a></li>
<li class="chapter" data-level="11.5.6" data-path="11-5-decision-tree.html"><a href="11-5-decision-tree.html#run-the-code-1"><i class="fa fa-check"></i><b>11.5.6</b> Run The Code</a></li>
</ul></li>
<li class="chapter" data-level="11.6" data-path="11-6-conditional-inference-tree.html"><a href="11-6-conditional-inference-tree.html"><i class="fa fa-check"></i><b>11.6</b> Conditional Inference Tree</a></li>
<li class="chapter" data-level="11.7" data-path="11-7-random-forest.html"><a href="11-7-random-forest.html"><i class="fa fa-check"></i><b>11.7</b> Random Forest</a><ul>
<li class="chapter" data-level="11.7.1" data-path="11-7-random-forest.html"><a href="11-7-random-forest.html#the-concept-2"><i class="fa fa-check"></i><b>11.7.1</b> The Concept</a></li>
<li class="chapter" data-level="11.7.2" data-path="11-7-random-forest.html"><a href="11-7-random-forest.html#run-the-code-2"><i class="fa fa-check"></i><b>11.7.2</b> Run The Code</a></li>
</ul></li>
<li class="chapter" data-level="11.8" data-path="11-8-svm.html"><a href="11-8-svm.html"><i class="fa fa-check"></i><b>11.8</b> SVM</a><ul>
<li class="chapter" data-level="11.8.1" data-path="11-8-svm.html"><a href="11-8-svm.html#run-the-code-3"><i class="fa fa-check"></i><b>11.8.1</b> Run The Code</a></li>
</ul></li>
<li class="chapter" data-level="11.9" data-path="11-9-performance-measurement.html"><a href="11-9-performance-measurement.html"><i class="fa fa-check"></i><b>11.9</b> Performance Measurement</a><ul>
<li class="chapter" data-level="11.9.1" data-path="11-9-performance-measurement.html"><a href="11-9-performance-measurement.html#confusion-matrix"><i class="fa fa-check"></i><b>11.9.1</b> Confusion Matrix</a></li>
<li class="chapter" data-level="11.9.2" data-path="11-9-performance-measurement.html"><a href="11-9-performance-measurement.html#performance-related-to-logistic-regression"><i class="fa fa-check"></i><b>11.9.2</b> Performance related to Logistic Regression</a></li>
<li class="chapter" data-level="11.9.3" data-path="11-9-performance-measurement.html"><a href="11-9-performance-measurement.html#model-evaluation"><i class="fa fa-check"></i><b>11.9.3</b> Model Evaluation</a></li>
<li class="chapter" data-level="11.9.4" data-path="11-9-performance-measurement.html"><a href="11-9-performance-measurement.html#run-the-code-4"><i class="fa fa-check"></i><b>11.9.4</b> Run The Code</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="12-survival-analysis.html"><a href="12-survival-analysis.html"><i class="fa fa-check"></i><b>12</b> Survival Analysis</a></li>
<li class="chapter" data-level="13" data-path="13-text-analysis.html"><a href="13-text-analysis.html"><i class="fa fa-check"></i><b>13</b> Text Analysis</a></li>
<li class="chapter" data-level="14" data-path="14-model-optimization.html"><a href="14-model-optimization.html"><i class="fa fa-check"></i><b>14</b> Model Optimization</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Business and Technical Analytics with R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="random-forest" class="section level2">
<h2><span class="header-section-number">11.7</span> Random Forest</h2>
<div id="the-concept-2" class="section level3">
<h3><span class="header-section-number">11.7.1</span> The Concept</h3>
<p>Random forest is a type of Ensemble Method, which enjoy all the ensemble benefits.<br />
Random forest model contain large amount of decision trees as oppose to tranditional single decision tree.</p>
<div id="how-does-it-work" class="section level4">
<h4><span class="header-section-number">11.7.1.1</span> How Does It Work ?</h4>
<ul>
<li>Divides training data into large amount random subsets, each subset will draw samples from training data using bagging method (with replacement). Each subset will contain the same number of observations as training set<br />
</li>
<li>Create a decision tree for each subset, resulting multiple trees (henced called Forest)<br />
</li>
<li>Each tree uses different set of random variables for splitting (not all variables are being used in each tree)<br />
</li>
<li>When doing prediction, all tress will votes and majority wins</li>
</ul>
<div class="figure">
<img src="images/random_forest.png" alt="Random Forest Process Flow" />
<p class="caption">Random Forest Process Flow</p>
</div>
</div>
<div id="the-beliefs" class="section level4">
<h4><span class="header-section-number">11.7.1.2</span> The Beliefs</h4>
<p>Random Forest provides much better accuracy compared to single decision tree. The major belief why this works are:</p>
<ol style="list-style-type: lower-alpha">
<li>Most of the trees can provide correct prediction for most part of the data<br />
</li>
<li>The tree are making mistake at different place</li>
</ol>
<p>Hence, major votes for classification result expected to be closer to correct classification</p>
</div>
<div id="advantages-and-disadvantages" class="section level4">
<h4><span class="header-section-number">11.7.1.3</span> Advantages and Disadvantages</h4>
<p><strong>Advantages</strong></p>
<ul>
<li>A single decision tree suffers from the phenomena of overfitting, as the signle tree model <strong>memorize</strong> the data<br />
</li>
<li>Randomforest uses bagging (with replacement) to ‘artificially’ creates different types of dataset, hence reducing the phenomena of <strong>memorizing</strong><br />
</li>
<li><strong>Cross validation is not required</strong>, since each subset are already being randomized<br />
</li>
<li>It is usually <strong>more accurate</strong> than single tree, but no <strong>guarantee</strong></li>
</ul>
<p><strong>Disadvantage</strong></p>
<ul>
<li>Ensemble method such as random forest is not interpretable</li>
</ul>
</div>
</div>
<div id="run-the-code-2" class="section level3">
<h3><span class="header-section-number">11.7.2</span> Run The Code</h3>
<div id="determine-class-or-probability-outcome" class="section level4">
<h4><span class="header-section-number">11.7.2.1</span> Determine Class or Probability Outcome</h4>
<p><strong><code>randomForest</code></strong> can build both <strong>class</strong> and <strong>probability</strong> model, depending on the dependent variable:</p>
<ul>
<li>If the depenedent variable is factor, it will build a model for class prediction<br />
</li>
<li>If the depenedent variable is number, it will build a model for probability prediction</li>
</ul>
<p>For 0/1 dependent variable, if not factorized, it is treated as number, and therefore for probability prediction.<br />
Here we convert all independent variable to factor for class prediction.</p>
<blockquote>
<p>This step is different from rpart (single decision tree), as rpart does not require this step. rpart can predict both class and probability by just specifying the type=‘class’ or type=‘response’</p>
</blockquote>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">train<span class="op">$</span>left =<span class="st"> </span><span class="kw">as.factor</span>(train<span class="op">$</span>left)
test<span class="op">$</span>left  =<span class="st"> </span><span class="kw">as.factor</span>(test<span class="op">$</span>left)</code></pre></div>
</div>
<div id="build-the-model-2" class="section level4">
<h4><span class="header-section-number">11.7.2.2</span> Build The Model</h4>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(randomForest)
<span class="kw">set.seed</span>(<span class="dv">1234</span>)
fit.forest &lt;-<span class="st"> </span><span class="kw">randomForest</span>(left<span class="op">~</span>., <span class="dt">data=</span>train)</code></pre></div>
</div>
<div id="prediction-3" class="section level4">
<h4><span class="header-section-number">11.7.2.3</span> Prediction</h4>
<p>Prediction syntax is similar to rpart decision tree.</p>
<blockquote>
<p><strong><code>predict</code></strong> <code>(object, newdata=NULL, type=c('response','class')</code><br />
<span class="math inline">\(\quad\)</span> <code>object  : model object from lm, glm, randomForest etc</code><br />
<span class="math inline">\(\quad\)</span> <code>newdata : dataset to predict on, default use train data stored in model</code><br />
<span class="math inline">\(\quad\)</span> <code>type    : default-'prob', which is probability output, 'class' - class output</code></p>
</blockquote>
<p><strong>Probability Prediction</strong></p>
<ul>
<li>Probability output is flexble so that researcher can tune the threshold and perform ROC analysis<br />
</li>
<li>Output probability as multiple columns, each column represent resutls for one class. (for binary prediction, it will be just two columns)</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">pred.rf.train1 =<span class="st"> </span><span class="kw">predict</span>(fit.forest, <span class="dt">type=</span><span class="st">&#39;prob&#39;</span>)  <span class="co"># default newdata is model train set</span>
pred.rf.test1  =<span class="st"> </span><span class="kw">predict</span>(fit.forest, <span class="dt">type=</span><span class="st">&#39;prob&#39;</span>, <span class="dt">newdata=</span>test)
<span class="kw">head</span>(pred.rf.train)</code></pre></div>
<pre><code>##  1365  7467  7311  7479 10328  7681 
##     1     0     0     0     0     0 
## Levels: 0 1</code></pre>
<p><strong>Class Prediction (threshold = 0.5)</strong></p>
<ul>
<li>Threshold of 0.5 applied<br />
</li>
<li>Single column output</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">pred.rf.train2 =<span class="st"> </span><span class="kw">predict</span>(fit.forest, <span class="dt">type =</span> <span class="st">&#39;class&#39;</span>) <span class="co"># default newdata is model train set</span>
pred.rf.test2  =<span class="st"> </span><span class="kw">predict</span>(fit.forest, <span class="dt">newdata=</span>test)   <span class="co"># default type=&#39;class&#39; as class output</span>
<span class="kw">head</span>(pred.dtree.train)</code></pre></div>
<pre><code>##  1365  7467  7311  7479 10328  7681 
##     1     0     0     0     0     0 
## Levels: 0 1</code></pre>
</div>
<div id="confusion-table-1" class="section level4">
<h4><span class="header-section-number">11.7.2.4</span> Confusion Table</h4>
<p>Confusion table below proofs that type=‘class’ is indeed prediction with threshold &gt;0.5.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#forest.pred &lt;- predict(fit.forest, newdata=test)</span>
<span class="kw">table</span>(test<span class="op">$</span>left, pred.rf.test1[,<span class="dv">2</span>] <span class="op">&gt;</span><span class="st"> </span><span class="fl">0.5</span>, <span class="dt">dnn=</span><span class="kw">c</span>(<span class="st">&quot;Actual&quot;</span>, <span class="st">&quot;Predicted&quot;</span>))</code></pre></div>
<pre><code>##       Predicted
## Actual FALSE TRUE
##      0  2975    7
##      1    48  570</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">table</span>(test<span class="op">$</span>left, pred.rf.test2,           <span class="dt">dnn=</span><span class="kw">c</span>(<span class="st">&quot;Actual&quot;</span>, <span class="st">&quot;Predicted&quot;</span>))</code></pre></div>
<pre><code>##       Predicted
## Actual    0    1
##      0 2975    7
##      1   48  570</code></pre>
</div>
<div id="analyize-vairable-importance" class="section level4">
<h4><span class="header-section-number">11.7.2.5</span> Analyize Vairable Importance</h4>
<p><strong>What Variables Are Important ?</strong></p>
<ul>
<li><code>randomForest::importance</code> output matrix of all variable used in the randomForest and <strong>their contribution</strong> in term of decreasing GiniIndex (decreasing impurity and increasing purity)<br />
</li>
<li>The higher the value, means the variable is more important in <strong>contributing to accuracy</strong> of the model</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">forest.imp =<span class="st"> </span><span class="kw">importance</span>(fit.forest)
forest.imp[<span class="kw">order</span>(forest.imp, <span class="dt">decreasing=</span>T),, drop=<span class="ot">FALSE</span>]  ## order descendingly</code></pre></div>
<pre><code>##         MeanDecreaseGini
## S             782.815405
## NP            419.376853
## TIC           400.909756
## ANH           358.655346
## LPE           289.506732
## Newborn         9.953228</code></pre>
<p><strong>Visualize The Importance</strong></p>
<p><strong><code>randomForest::varImpPlot</code></strong> comes with handy plotting utility to plot the variable importance data.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">varImpPlot</span>(fit.forest)</code></pre></div>
<p><img src="biz_tech_analytics_r_files/figure-html/unnamed-chunk-28-1.png" width="864" /></p>
</div>
<div id="frequent-used-variables" class="section level4">
<h4><span class="header-section-number">11.7.2.6</span> Frequent Used Variables</h4>
<ul>
<li>Random forest models work by building a large collection of trees. As a result, we lose some of the interpretability that comes with CART in terms of seeing how predictions are made and which variables are important<br />
</li>
<li>However, one of the way to give us insight into which variables are important, other than the decrease of impurity above, we can calculate how frequent a variable is being used for decision making (splitting)</li>
</ul>
<p><strong><code>randomForest::varUsed</code></strong> returns a vector of frequency of each variable used.<br />
However, it doesn’t comes with the variable name, which can be obtained from <strong><code>$forest$xlevels</code></strong>.</p>
<blockquote>
<p><strong><code>randomForest::varUsed(x, by.tree=FALSE, count=TRUE)</code></strong> <span class="math inline">\(\quad\)</span> <code>x       : model object of randomForest</code><br />
<span class="math inline">\(\quad\)</span> <code>by.tree : FALSE, default display per variable appearance, and not per tree</code><br />
<span class="math inline">\(\quad\)</span> <code>count   : TRUE, default aggregate all varibales appearance into frequency, otherwise display individual appearance</code></p>
</blockquote>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">vu =<span class="st"> </span><span class="kw">varUsed</span>(fit.forest, <span class="dt">count =</span> <span class="ot">TRUE</span>)
vusorted =<span class="st"> </span><span class="kw">sort</span>(vu, <span class="dt">decreasing =</span> <span class="ot">FALSE</span>, <span class="dt">index.return =</span> <span class="ot">TRUE</span>)
<span class="kw">dotchart</span>(vusorted<span class="op">$</span>x, <span class="kw">names</span>(fit.forest<span class="op">$</span>forest<span class="op">$</span>xlevels[vusorted<span class="op">$</span>ix]))</code></pre></div>
<p><img src="biz_tech_analytics_r_files/figure-html/unnamed-chunk-29-1.png" width="864" /></p>
</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="11-6-conditional-inference-tree.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="11-8-svm.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/yongks/biz_tech_analytics_r/edit/master/11-classification.Rmd",
"text": "Edit"
},
"download": ["biz_tech_analytics_r.pdf", "biz_tech_analytics_r.epub", "biz_tech_analytics_r.mobi"],
"toc": {
"collapse": "section",
"scroll_highlight": true
},
"toolbar": {
"position": "fixed"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(script.src))
      script.src  = script.src.replace(/^https?:/, '');
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
